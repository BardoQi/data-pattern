# 数据模式
## 第三章 基础数据模式：计数模式
 
计数问题看起来超级简单。似乎没有什么模式可讲。实际并不是这样。
  
比如，最经典的计数模式问题就是历法。我国通行的是公历与农历。公历完全与地球公转周期吻合。同时，我们把一年分为四个季度，春夏秋冬。对于公历，到哪个月，我们即知是到了哪个季节。但公历不足的地方，无法得知今晚的月亮圆不圆。农历则是严格以月亮绕地球一周来界定一个月。由此，无法确定季节，于是，农历用24节气来更精细划分一年中的阶段。当然，农历中还有用干支记年记月记日记时。干支则表示了地球与金木水火土五星的关系。并且，现在的农历相对于古代，还修改了置闰的方法（将定气法改成了变气法，从而更符合地球近日点与远日点速度的变化），所以，现在在农历是没有闰正月和闰腊月的。假如你翻开千年历书，你会发现，宋朝是有的。
  
表面来看，历法这个记数模式已相当完善了，但并非如此，国际上还有其他历法体系，比如，伊斯兰教历。联合国曾经花很长时间处理关于历法改革问题（因为曾经有过大量的历法改革提案）。当然，现在联合国已经永久终止历法改革。
  
记数模式的好坏直接影响程序复杂度，产品易用性。中国最失败的记数模式案例就是邮政编码。因为它不同于电话区号，电话区号开通后才有，区号乱可以理解。邮政编码则是未使用记数模式的顺序记数。
   
而相比后来，国家为了发身份证，从而制定了行政区划编码，这就是一个极为成功的实例。因为，我们直接能从编码中了解是省级还是市级，还是区县级。本质上，它是采用了路径记数模式。
   
不过，作为中国程序员，我们觉得可悲的是，现在仍有很多新的程序，使用ID从1开始的顺序id行政区划数据。github.com上的开源很多人都不知道。
   
想当年，微软公司开发biztalk server，原因不是在于数据不通，而是双方不懂。如同你讲的是英语，我讲的是汉语。所以要个翻译官，biztalk server。而造成这种问题的一个相当重要的因素就是计数模式。
  
最常见的，一个技术人员的职位，现实中使用的是具体名称，助理工程师，工程师，高级工程师。这属于具名记数模式。有程序员就直接用此写入数据库。由此，无法建立整数索引。直接影响了数据库的效率。当然，也有人用简写，助工，工程师，高工。有经验的程序员则是使用枚举，或相关数据表中的id。但即使是这样，数值未必相同。所以，我们需要数据集成模式来解决问题。
   
计数模式在系统中常使用的方式有数据表类型映射，这种做法方便联表查询。有使用枚举类型，这种方式对于数值较少的相对合适。最佳方案则是使用具有较好数据模式的标准数据，比如，行政区划就是一个好的示例。
   
因为计数模式混乱，直接制约了大数据与人工智能相关领域的发展。
   
尽管国家有关部门颁布的很多相关标准，比如像《中华人民共和国行业标准代码》，但这一类的代码体系是否有合理科学的记数模式，是直接影响其推广使用的关键。
   
记数模式不只是任何信息系统必须的需求，同时也是大数据与人工智能等深层次发展的需求。但目前，这一领域仍处于初级阶段，计数模式的标准化任重而道远。
    
记数模式另一成功案例就是身份证号。我们常把这一模式称之为身份证模式，并且，这一模式广泛用于凭证编号，订单号等字段，从而使其单号有其可读性。但是，现有的系统中，将顺序ID当成凭证编号或订单号的仍随处可见。这足以说明，真正懂得计数模式的人还是相当少的。